# STIM

STIM is a set of scripts and modules to handle the creation and transformation of audio and video experimental stimuli.

They allow to easilly handle indexing of audio/video databases, transform audio and video in different ways and extract different audio features.

There a series of tutorials in the tutorial section showing how these modules work.

Some interesting modules:

## audio_analysis ##
Extract audio features

## super_vp_commands ##
A set of wraper functions around IRCAM super-vp library 

## video_processing ##
A set of functions to handle video indexing, audio replacement in video, resolution changes, and more...

## Instalation and dependencies ##
These python modules depend on several externals for them to work properly. If you want to use the super_vp_commands or parse sdif files you should install all of the packages above. If you want the full functionality of STIM you will also need to install IRCAM super-vp command line library and praat (https://www.fon.hum.uva.nl/praat/)

Install other external dependencies with [homebrew](https://brew.sh/):
```
brew install ffmpeg opencv libsndfile cmake autoconf automake swig
```

To install STIM, I recomend using conda package manager and git for this installation of STIM. Replace PATH_TO_STIM_FOLDER with your STIM path.
Clone the source folder somewhere safe in your computer â€” where it will live forever witout being moved:
```
cd PATH_TO_STIM_FOLDER
git clone https://github.com/Pablo-Arias/STIM.git
```

Create a new conda environment with all dependencies, activate and add the path to your python path:
```
conda env create -n stim39 --file stim39.yaml
conda activate stim39
conda develop PATH_TO_STIM_FOLDER
```

Run unit tests to see if everything worked:
```
cd PATH_TO_STIM_FOLDER/tests/
python -m unittest discover .
```

Check that the tests are working and that packages are not missing.

###  Install EASDIF ### 
If you want to parse sdif files generated by audiosculpt with python, (.sdif files) you will need the EASDIF library, which can be installed with the following commands:
```
cvs -d:pserver:anonymous@sdif.cvs.sourceforge.net:/cvsroot/sdif login 
cvs -z3 -d:pserver:anonymous@sdif.cvs.sourceforge.net:/cvsroot/sdif co -P EASDIF_SDIF
cd EASDIF_SDIF
mkdir -p build_EASDIF_x86_64
cd build_EASDIF_x86_64
rm -f CMakeCache.txt
cmake -DEASDIF_DO_PYTHON:bool=on -DPYTHON:STRING=python -DEASDIF_BUILD_STATIC:BOOL=ON ..
make Easdif_static_pic
make install_python_easdif_module_globally
```

## Tutorials ##
Now you can check the example modules to learn how to use these scripts.

Just open the .ipybn files inside the folder notebook_examples of the STIM (even from a browser).
